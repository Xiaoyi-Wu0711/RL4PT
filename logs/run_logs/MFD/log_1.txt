/Users/xiawu/RL4PT/MFD.py:55: NumbaExperimentalFeatureWarning: Use of isinstance() detected. This is an experimental feature.
  if isinstance(x, list):
/Users/xiawu/py39/lib/python3.9/site-packages/numba/core/ir_utils.py:2149: NumbaPendingDeprecationWarning: 
Encountered the use of a type that is scheduled for deprecation: type 'reflected list' found for argument '_Accumulation' of function 'estimated_TT'.

For more information visit https://numba.readthedocs.io/en/stable/reference/deprecation.html#deprecation-of-reflection-for-list-and-set-types

File "MFD.py", line 62:
@njit(parallel=True)
def estimated_TT(all_time_matrix,  time_list, car_number, _Accumulation, dist, ffspeed):
^

  warnings.warn(NumbaPendingDeprecationWarning(msg, loc=loc))
/Users/xiawu/py39/lib/python3.9/site-packages/numba/core/ir_utils.py:2149: NumbaPendingDeprecationWarning: 
Encountered the use of a type that is scheduled for deprecation: type 'reflected list' found for argument '__Accumulation' of function '__numba_parfor_gufunc_0x152e572b0'.

For more information visit https://numba.readthedocs.io/en/stable/reference/deprecation.html#deprecation-of-reflection-for-list-and-set-types

File "<string>", line 1:
<source missing, REPL/exec in use?>

  warnings.warn(NumbaPendingDeprecationWarning(msg, loc=loc))
/Users/xiawu/RL4PT/MFD.py:397: RuntimeWarning: More than 20 figures have been opened. Figures created through the pyplot interface (`matplotlib.pyplot.figure`) are retained until explicitly closed and may consume too much memory. (To control this warning, see the rcParam `figure.max_open_warning`). Consider using `matplotlib.pyplot.close()`.
  fig, ax = plt.subplots(figsize=(12,9))
start_time  Wed Sep 13 11:55:48 2023


Scenario:  NT  Toll:  normal
annual income ginit 0.567845856778155 remaining I gini 0.6187642849311471
 day  0
 day  1
 day  2
 day  3
 day  4
 day  5
 day  6
 day  7
 day  8
 day  9
 day  10
 day  11
 day  12
 day  13
 day  14
 day  15
 day  16
 day  17
 day  18
 day  19
 day  20
 day  21
 day  22
 day  23
 day  24
 day  25
 day  26
 day  27
 day  28
 day  29
numOfbindingI:  0 number of pt travel:  13
average tt:  34.06048534937358 average sde:  1.7176252246721797 average SDL:  11.703630574045759 max TT:  43.199999999999996
average car tt:  34.04461601713661 average car sde:  1.720607611198257 average SDL:  11.723952091003499 max TT:  43.199999999999996
nan user id: (array([], dtype=int64),)
43.29518044715023 131.87689375240262
ifptshare by VOT [7, 4, 1, 1, 0]
530.164461958
{'ntgini': 0.6187642849311471, 'avgtt': 34.06048534937358, 'avgsde': 1.7176252246721797, 'avgsdl': 11.703630574045759, 'sw': [1971644.0899632904, 2034757.0855054115, 2037694.326162226, 2040000.7354154657, 2042226.8983891497, 2044281.161403823, 2046090.2013770104, 2047561.1009773077, 2049121.7702166373, 2050535.2863998208, 2051757.5939000414, 2052541.3006074177, 2053305.5833739326, 2053990.9373073583, 2054742.9366745125, 2055290.7645853856, 2055843.8621987775, 2056152.7417840827, 2056542.6123429346, 2056896.8802426443, 2057123.464387847, 2057388.5515619207, 2057660.1046620486, 2057871.277265788, 2058121.679356374, 2058177.9507334894, 2058357.1160517787, 2058447.6058625383, 2058553.591989013, 2058584.8297160892]}


Scenario:  Trinity  Toll:  normal
annual income ginit 0.567845856778155 remaining I gini 0.6187642849311471
 day  0
 day  1
 day  2
 day  3
 day  4
 day  5
 day  6
 day  7
 day  8
 day  9
 day  10
 day  11
 day  12
 day  13
 day  14
 day  15
 day  16
 day  17
 day  18
 day  19
 day  20
 day  21
 day  22
 day  23
 day  24
 day  25
 day  26
 day  27
 day  28
 day  29
numOfbindingI:  0 number of pt travel:  876
average tt:  32.004630295402336 average sde:  1.917270117406829 average SDL:  11.000540412809173 max TT:  43.199999999999996
average car tt:  30.524083214903012 average car sde:  2.1708221438030217 average SDL:  12.455322025372704 max TT:  43.199999999999996
nan user id: (array([], dtype=int64),)
welfare:  7379.442652929357 MCE:  7074.596250280809 full allowance:  0.0 full RR:  -191.67613800007894 full Toll revenue:  11208.858492000005
number of buying:  4470 number of selling:  3030 number of undesired:  0.0
original gini:  0.6187642849311471 current gini:  0.6176977859887424
NT util gini:  0.591692993043753 current util gini:  0.590336065781132
average utilbenefit for qt1 no binding:  1.4288061278547113 1.4288061278547113 1875 1875
average utilbenefit for qt1 traveling:  -0.49620960025059385 1.4288061278547113 1875 1329
[1875, 1875, 1875, 1125, 750]
average mce by I [1.2863884287110425, 0.41013746407202173, -0.19772875690369188, 0.38292543051177147, 5.36698219890843]
average utilbenefit by I [1.4288061278547113, 0.4274748886841551, -0.20068420998309605, 0.3849997638880299, 5.37833339235111]
average utilbenefit increase percentage by I [0.057142662895906735, 0.0062236056075627615, -0.0010109342783207085, 0.000697611513684689, 0.003800426258357978]
average SDE by I [2.72867411096162, 2.353763050004, 1.8170775647533999, 0.9922476081952627, 0.4355429474778454]
average SDL by I [10.640172764940605, 12.341962428032579, 12.36192273746254, 10.393569199232152, 6.054905503154179]
average TT by I [34.019338653978984, 32.449959378028574, 30.835831839375807, 30.702299368814668, 30.730029222343]
average cpcost by I [0.4745349440000002, 0.6429924800000003, 0.8755692192000002, 0.9643046400000003, 1.0433737600000004]
average buy by I [0.4745349440000002, 0.6429924800000003, 0.8755692192000002, 0.9643046400000003, 1.0433737600000004]
average sell by I [1.4872037440000063, 0.9747108800000057, 0.4626244480000051, 0.3386019866666713, 0.28110576000000376]
average NTtt by I [34.19169144395748, 34.0662982032845, 33.974500520524, 33.961498889226185, 34.0813797404816]
average NTsdl by I [14.017114826871632, 12.726318047700925, 11.770796269574527, 9.521535812603481, 6.468429161184671]
average NTsde by I [2.600570049580821, 2.1068465110831003, 1.461469082383858, 0.9237702567106301, 0.36838275403640486]
average cv by I [0.0, 0.0, 0.0, 0.0, 0.0]
total income share by I [0.02391702835409925, 0.07527218903694342, 0.18810568149062243, 0.2440922640811302, 0.4686128370372047]
total income+benefit share by I [0.025123608774122053, 0.07538406916294302, 0.1872360056770401, 0.24340880976814425, 0.46884750661775065]
allowance by I [0.0, 0.0, 0.0, 0.0, 0.0]
ifptshare by I [546, 289, 38, 3, 0]
ifbindingI by I [0, 0, 0, 0, 0]
MUI by I [1.1092259248578766, 1.0388540803298894, 1.0152569945782375, 1.006967827694316, 1.0028663398103694]
final market price is:  1.9500000000000008
percetange positive benefit:  0.5613333333333334
540.5617409999999
{'obj': 7379.442652929357, 'objcv': 0, 'Tollcollected': 11208.858492000005, 'ntgini': 0.6187642849311471, 'gini': 0.6176977859887424, 'grpcv': array([0., 0., 0., 0., 0.]), 'grpmce': array([ 1.28638843,  0.41013746, -0.19772876,  0.38292543,  5.3669822 ]), 'avgtt': 32.004630295402336, 'avgsde': 1.917270117406829, 'avgsdl': 11.000540412809173, 'RR': -191.67613800007894, 'ginicv': 0.6187642849311471, 'grpa': array([0., 0., 0., 0., 0.]), 'dataframe':        betavot  dailyincome    a  ...        Wv  nonlinearInc    linearInc
0     0.797749  1113.959161  0.0  ...  0.000000     21.034126  1107.178812
1     0.165118   202.969433  0.0  ...  0.000000     15.882974   197.203083
2     0.066859    61.477369  0.0  ...  2.005779     12.615461    65.030889
3     0.097843   106.094533  0.0  ...  2.935303     14.146055   109.648053
4     0.207093   263.414447  0.0  ...  0.000000     16.699086   259.481098
...        ...          ...  ...  ...       ...           ...          ...
7495  0.075714    74.227909  0.0  ...  0.000000     12.679299    66.472559
7496  0.141184   168.504869  0.0  ...  0.000000     15.267998   160.281519
7497  0.147217   177.191967  0.0  ...  0.000000     15.439458   169.826618
7498  0.193332   243.598086  0.0  ...  0.000000     16.483400   241.341736
7499  0.143442   171.755877  0.0  ...  0.000000     15.353542   164.975528

[7500 rows x 32 columns], 'numUndesired': 0.0, 'sw': [-84770.22003931974, -16655.297152897307, -14782.039760686746, -12126.95995661416, -9753.925080914527, -7828.0408118258965, -5718.068346587505, -3961.5680007790743, -2593.981607379873, -994.6820764383901, 322.4822301044496, 1053.6806321596523, 2236.724444507333, 3326.3947684254445, 4166.185940043222, 4828.2387109025985, 5638.331065169412, 6205.426467711848, 6733.233547129235, 7057.627781964712, 7336.742366423899, 7655.6233158557725, 7635.124731414831, 7592.910696825523, 7556.66230268361, 7561.344722384687, 7492.590981274378, 7428.578349295892, 7403.3717707172045, 7379.4426529293605], 'pricevec': [1, 0.95, 1.0, 1.05, 1.1, 1.1500000000000001, 1.2000000000000002, 1.2500000000000002, 1.3000000000000003, 1.3500000000000003, 1.4000000000000004, 1.4500000000000004, 1.5000000000000004, 1.5500000000000005, 1.6000000000000005, 1.6500000000000006, 1.7000000000000006, 1.7500000000000007, 1.8000000000000007, 1.8500000000000008, 1.9000000000000008, 1.9500000000000008, 1.9500000000000008, 1.9500000000000008, 1.9500000000000008, 1.9500000000000008, 1.9500000000000008, 1.9500000000000008, 1.9500000000000008, 1.9500000000000008], 'Buy tc': 223.5, 'Sell tc': -151.5, 'Buy': 5604.429246000002, 'Sell': 6075.26731500004, 'ptshare': [0, 70, 83, 100, 120, 148, 182, 205, 233, 280, 320, 347, 396, 441, 489, 531, 584, 643, 704, 759, 809, 875, 875, 875, 876, 876, 876, 876, 876, 876], 'flowconvergevec ': [1252.18528980339, 204.1910869749216, 290.09825921573537, 252.2657329087722, 242.32209969377536, 244.2253058141191, 266.7676891979237, 204.45537410398387, 234.83398391203946, 218.77614129516041, 170.2498164463034, 177.56125703542426, 193.4916018849397, 167.3200525938239, 151.4463601411404, 182.88520989954327, 143.06641814206435, 166.0963575759565, 167.1496335622666, 155.68879214638412, 148.62368586466962, 49.3051721424842, 56.88585061331157, 71.30918594402827, 19.77371993328519, 72.95889253545451, 42.40283009422838, 33.075670817082454, 36.701498607005135], 'avgcartt': 30.524083214903012, 'avgcarsde': 2.1708221438030217, 'avgcarsdl': 12.455322025372704, 'numOfbindingI': 0, 'numberOfPT': 876}
end_time  Wed Sep 13 12:13:39 2023
total elapsed time  1070.7544770240784
